---
title: "Delete User"
api: "DELETE /deleteUser"
description: "Soft delete a user account (sets active=false and isDeleted=true)"
---

## üóëÔ∏è Overview

Soft delete a user account. The user is marked as deleted and deactivated but the record remains in the database for audit purposes.

---

##  Authentication

<ParamField header="Cookie" type="string" required>
  Your API key for authentication
</ParamField>

<ParamField header="Accept" type="string">
  application/json, text/plain, */*
</ParamField>

<ParamField header="Origin" type="string">
  Origin of the request (e.g., https://vb-seamless-dev-backend.oriserve.com/)
</ParamField>

<ParamField header="User-Agent" type="string">
  Browser or client user agent
</ParamField>

---

##  Query Parameters

<ParamField query="userId" type="string" required>
  MongoDB ObjectId of the user to delete
  ```
  507f1f77bcf86cd799439011
  ```
</ParamField>

---

## Response

### Success Response (200 OK):
```json
{
  "success": true,
  "message": "User deleted successfully"
}
```

### Error Responses:

#### 400 - Missing User ID:
```json
{
  "success": false,
  "message": "User ID is required"
}
```

#### 404 - User Not Found:
```json
{
  "success": false,
  "message": "User not found or already deleted"
}
```

#### 500 - Server Error:
```json
{
  "success": false,
  "message": "Error deleting user",
  "data": "Error details here"
}
```

---

## Code Examples

### cURL:
```bash
curl -X DELETE "https://vb-seamless-dev-backend.oriserve.com/deleteUser?userId=507f1f77bcf86cd799439011" \
  -H "x-api-key: YOUR_API_KEY"
```

### JavaScript:
```javascript
const axios = require('axios');

async function deleteUser(userId) {
  try {
    const response = await axios.delete(
      `https://vb-seamless-dev-backend.oriserve.com/deleteUser?userId=${userId}`,
      {
        headers: {
          'x-api-key': 'YOUR_API_KEY'
        }
      }
    );
    
    console.log('User deleted:', response.data.message);
  } catch (error) {
    console.error('Error:', error.response.data);
  }
}

deleteUser('507f1f77bcf86cd799439011');
```

### Python:
```python
import requests

def delete_user(user_id):
    url = f"https://vb-seamless-dev-backend.oriserve.com/deleteUser?userId={user_id}"
    
    headers = {
        "x-api-key": "YOUR_API_KEY"
    }
    
    response = requests.delete(url, headers=headers)
    
    if response.status_code == 200:
        print("User deleted successfully!")
        print(response.json())
    else:
        print("Error:", response.json())

delete_user("507f1f77bcf86cd799439011")
```

---

## What Happens During Deletion?

### Database Updates:
```javascript
// The following fields are updated:
{
  active: false,        // User cannot login
  isDeleted: true,      // Marked as deleted
  updatedAt: new Date() // Auto-updated by Mongoose
}
```

### Effects:
1. ‚ùå **User cannot login** - `active` set to `false`
2. üîí **Account marked deleted** - `isDeleted` set to `true`
3. üö´ **Filtered from GET requests** - Won't appear in `/getAllUsers`
4. üìÅ **Data preserved** - Record remains in database for audit
5.  **Sessions invalidated** - Existing login sessions become invalid

---

##  Restoring Deleted Users

To restore a deleted user, use the Update User endpoint:

```javascript
await axios.post('/updateUser', {
  userId: '507f1f77bcf86cd799439011',
  active: true,
  isDeleted: false
});
```

---

## Important Notes

<Warning>
  **Soft Delete Only:** This endpoint performs a soft delete. The user record is NOT permanently removed from the database. Use direct database access for hard deletion if needed.
</Warning>

<Note>
  **Cascade Effects:** Deleting a user does NOT delete their:
  - Created campaigns
  - Call history
  - Scripts
  - Associated data
  
  These records remain intact with the user ID reference.
</Note>

<Note>
  **Authorization:** Typically only admins should have permission to delete users. Implement proper role-based access control.
</Note>

---

## Use Cases

### 1. Offboarding Employee:
```javascript
async function offboardUser(userId) {
  // 1. Delete user account
  await axios.delete(`/deleteUser?userId=${userId}`);
  
  // 2. Transfer their campaigns to manager
  await transferCampaigns(userId, managerId);
  
  // 3. Send offboarding email
  await sendOffboardingEmail(userId);
  
  console.log('User offboarded successfully');
}
```

### 2. Bulk User Deletion:
```javascript
async function deleteMultipleUsers(userIds) {
  const results = await Promise.allSettled(
    userIds.map(userId => 
      axios.delete(`/deleteUser?userId=${userId}`)
    )
  );
  
  const successful = results.filter(r => r.status === 'fulfilled').length;
  const failed = results.filter(r => r.status === 'rejected').length;
  
  console.log(`Deleted: ${successful}, Failed: ${failed}`);
}
```

### 3. Inactive User Cleanup:
```javascript
async function cleanupInactiveUsers(daysSinceLastLogin) {
  const users = await axios.get('/getAllUsers');
  const cutoffDate = new Date();
  cutoffDate.setDate(cutoffDate.getDate() - daysSinceLastLogin);
  
  const inactiveUsers = users.data.data.filter(user => 
    new Date(user.updatedAt) < cutoffDate
  );
  
  for (const user of inactiveUsers) {
    await axios.delete(`/deleteUser?userId=${user._id}`);
  }
  
  console.log(`Cleaned up ${inactiveUsers.length} inactive users`);
}
```

### 4. Confirmation Before Delete:
```javascript
async function deleteUserWithConfirmation(userId, userName) {
  const confirmed = confirm(
    `Are you sure you want to delete user "${userName}"? This action will deactivate their account.`
  );
  
  if (confirmed) {
    await axios.delete(`/deleteUser?userId=${userId}`);
    console.log('User deleted');
  } else {
    console.log('Deletion cancelled');
  }
}
```

---

##  Security Best Practices

1. **Authorization Check:**
```javascript
// Ensure only admins can delete users
if (currentUser.accessLevel !== 'admin') {
  throw new Error('Unauthorized: Admin access required');
}
```

2. **Audit Logging:**
```javascript
// Log deletion for audit trail
await AuditLog.create({
  action: 'USER_DELETED',
  performedBy: currentUser._id,
  targetUser: userId,
  timestamp: new Date()
});
```

3. **Self-Deletion Prevention:**
```javascript
// Prevent users from deleting themselves
if (userId === currentUser._id) {
  throw new Error('Cannot delete your own account');
}
```

---

## Rate Limits

| Plan | Requests/min |
|------|--------------|
| Free | 60 |
| Basic | 300 |
| Pro | 1000 |
| Enterprise | Unlimited |

---

## Related Endpoints

- [Get All Users](/api-reference/users/get-all-users) - List users (excludes deleted)
- [Update User](/api-reference/users/update-user) - Restore deleted user
- [Create User](/api-reference/users/create-user) - Create new user

---

## üõ°Ô∏è Data Retention

<Note>
  **Compliance Note:** Soft-deleted users are retained indefinitely for audit purposes. For GDPR/data privacy compliance, implement a separate hard deletion process that permanently removes user data after a retention period.
</Note>

```javascript
// Example: Hard delete after 90 days
async function hardDeleteExpiredUsers() {
  const ninetyDaysAgo = new Date();
  ninetyDaysAgo.setDate(ninetyDaysAgo.getDate() - 90);
  
  await User.deleteMany({
    isDeleted: true,
    updatedAt: { $lt: ninetyDaysAgo }
  });
}
```

---

**Important:** This is a soft delete operation. User data is preserved for audit purposes. üîí
