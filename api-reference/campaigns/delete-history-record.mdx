---
title: "Delete History Record"
api: "DELETE /deleteHistoryRecord/:callId"
description: "Soft-delete a voice session (call history record) by CallId"
---

## Overview

Soft-deletes a voice session by setting its `isDeleted` flag to `true`. The record remains in the database but is excluded from future queries that filter by `isDeleted: false`.

---

## Path Parameters

<ParamField path="callId" type="string" required>
  The unique CallId of the voice session to delete
</ParamField>

---

## Response (Success - 200)

```json
{
  "status": "success",
  "data": {
    "CallId": "call-uuid-abc123"
  },
  "message": "Deleted"
}
```

---

## Response (Error - 500)

### Missing CallId
```json
{
  "status": "failed",
  "data": {},
  "message": "Failed."
}
```

### Record Not Found or Already Deleted
```json
{
  "status": "failed",
  "data": {},
  "message": "Failed."
}
```

---

## Code Examples

<CodeGroup>

```javascript JavaScript
const callId = 'call-uuid-abc123';
const response = await fetch(`https://vb-seamless-dev-backend.oriserve.com/deleteHistoryRecord/${callId}`, {
  method: 'DELETE'
});

const data = await response.json();
console.log(data.message); // "Deleted"
```

```python Python
import requests

call_id = 'call-uuid-abc123'
response = requests.delete(f'https://vb-seamless-dev-backend.oriserve.com/deleteHistoryRecord/{call_id}')

data = response.json()
print(data['message'])
```

```bash cURL
curl -X DELETE https://vb-seamless-dev-backend.oriserve.com/deleteHistoryRecord/call-uuid-abc123
```

</CodeGroup>

---

## Notes

- **Soft Delete:** Sets `isDeleted: true` on the VoiceSession document; the record is not physically removed from the database
- **Single Record:** Only deletes one voice session matching the provided `CallId`
- **Idempotent:** If the record is already deleted or doesn't exist, the API returns a 500 error
- **CallId Lookup:** Uses the `CallId` field (not MongoDB `_id`) to find the voice session
- **Use Case:** Clean up call history UI by hiding unwanted records without permanent deletion
- **Error Handling:** Returns 500 if `callId` is missing, record not found, or update fails
- **Modified Count Check:** Verifies that exactly 1 document was modified; errors if 0 or >1
- **No Hard Delete:** To permanently delete records, use direct database operations (not recommended for production)
