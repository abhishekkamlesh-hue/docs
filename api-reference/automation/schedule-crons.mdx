---
title: "Schedule Cron Jobs"
api: "POST /scheduleCrons"
description: "Schedule recurring automated tasks using cron expressions"
---

##  Overview

Schedule automated recurring tasks like report generation, data cleanup, or campaign health checks using cron expressions.

---

##  Authentication

<ParamField header="Cookie" type="string" required>
  Your API key for authentication
</ParamField>

<ParamField header="Accept" type="string">
  application/json, text/plain, */*
</ParamField>

<ParamField header="Origin" type="string">
  Origin of the request (e.g., https://vb-seamless-dev-backend.oriserve.com/)
</ParamField>

<ParamField header="Content-Type" type="string" required>
  application/json
</ParamField>

<ParamField header="User-Agent" type="string">
  Browser or client user agent
</ParamField>

---

##  Request Body

<ParamField body="queueName" type="string">
  Queue name for the job (default: "utilityQueue")
  ```
  utilityQueue | campaignQueue | reportQueue
  ```
</ParamField>

<ParamField body="actionName" type="string">
  Action to execute (default: "gcsCampaignReport")
  ```
  gcsCampaignReport | dataCleanup | healthCheck | customAction
  ```
</ParamField>

<ParamField body="repeat" type="object">
  Cron schedule configuration
</ParamField>

### Repeat Object Fields:

<ParamField body="repeat.cron" type="string" required>
  Cron expression (standard cron format)
  ```
  0 11 * * *
  ```
  
  **Examples:**
  - `0 11 * * *` - Daily at 11:00 AM
  - `0 */6 * * *` - Every 6 hours
  - `0 9 * * 1` - Every Monday at 9:00 AM
  - `30 8 * * 1-5` - Weekdays at 8:30 AM
  - `0 0 1 * *` - First day of every month at midnight
</ParamField>

<ParamField body="repeat.tz" type="string">
  Timezone (default: "Asia/Calcutta")
  ```
  Asia/Calcutta | America/New_York | Europe/London | UTC
  ```
</ParamField>

### Example Request 1 (Daily Report):
```json
{
  "queueName": "utilityQueue",
  "actionName": "gcsCampaignReport",
  "repeat": {
    "cron": "0 11 * * *",
    "tz": "Asia/Calcutta"
  }
}
```

### Example Request 2 (Hourly Data Sync):
```json
{
  "queueName": "utilityQueue",
  "actionName": "dataSync",
  "repeat": {
    "cron": "0 * * * *",
    "tz": "Asia/Calcutta"
  }
}
```

### Example Request 3 (Weekly Report):
```json
{
  "queueName": "reportQueue",
  "actionName": "weeklyAnalytics",
  "repeat": {
    "cron": "0 9 * * 1",
    "tz": "Asia/Calcutta"
  }
}
```

---

## Response

### Success Response (200 OK):
```json
{
  "success": true,
  "message": "Report scheduled",
  "data": {
    "repeat": {
      "cron": "0 11 * * *",
      "tz": "Asia/Calcutta"
    },
    "job_id": "utilityQueue_gcsCampaignReport_0 11 * * *",
    "next_run": "2024-01-17T11:00:00+05:30"
  }
}
```

---

## Code Examples

### cURL:
```bash
curl -X POST "https://vb-seamless-dev-backend.oriserve.com/scheduleCrons" \
  -H "x-api-key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "queueName": "utilityQueue",
    "actionName": "gcsCampaignReport",
    "repeat": {
      "cron": "0 11 * * *",
      "tz": "Asia/Calcutta"
    }
  }'
```

### JavaScript:
```javascript
const axios = require('axios');

async function scheduleCronJob(config) {
  const response = await axios.post(
    'https://vb-seamless-dev-backend.oriserve.com/scheduleCrons',
    config,
    {
      headers: {
        'x-api-key': 'YOUR_API_KEY',
        'Content-Type': 'application/json'
      }
    }
  );
  
  console.log('âœ… Cron job scheduled');
  console.log('Schedule:', response.data.data.repeat.cron);
  console.log('Next run:', response.data.data.next_run);
  
  return response.data.data;
}

// Example: Daily report at 11 AM IST
scheduleCronJob({
  queueName: 'utilityQueue',
  actionName: 'gcsCampaignReport',
  repeat: {
    cron: '0 11 * * *',
    tz: 'Asia/Calcutta'
  }
});

// Example: Every 6 hours
scheduleCronJob({
  queueName: 'utilityQueue',
  actionName: 'healthCheck',
  repeat: {
    cron: '0 */6 * * *',
    tz: 'Asia/Calcutta'
  }
});

// Example: Weekly report on Monday
scheduleCronJob({
  queueName: 'reportQueue',
  actionName: 'weeklyAnalytics',
  repeat: {
    cron: '0 9 * * 1',
    tz: 'Asia/Calcutta'
  }
});
```

### Python:
```python
import requests

def schedule_cron_job(queue_name, action_name, cron_expression, timezone="Asia/Calcutta"):
    url = "https://vb-seamless-dev-backend.oriserve.com/scheduleCrons"
    
    payload = {
        "queueName": queue_name,
        "actionName": action_name,
        "repeat": {
            "cron": cron_expression,
            "tz": timezone
        }
    }
    
    headers = {
        "x-api-key": "YOUR_API_KEY",
        "Content-Type": "application/json"
    }
    
    response = requests.post(url, json=payload, headers=headers)
    
    if response.status_code == 200:
        data = response.json()['data']
        print(f"âœ… Cron job scheduled")
        print(f"Schedule: {data['repeat']['cron']}")
        print(f"Timezone: {data['repeat']['tz']}")
        return data
    else:
        print("Error:", response.json())
        return None

# Examples
schedule_cron_job(
    queue_name="utilityQueue",
    action_name="gcsCampaignReport",
    cron_expression="0 11 * * *"
)

schedule_cron_job(
    queue_name="utilityQueue",
    action_name="dataCleanup",
    cron_expression="0 0 * * 0"  # Weekly on Sunday midnight
)
```

---

## ðŸ“… Cron Expression Guide

### Format:
```
* * * * *
â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€ Day of Week (0-7, Sunday=0 or 7)
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€ Month (1-12)
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€ Day of Month (1-31)
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€ Hour (0-23)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Minute (0-59)
```

### Common Patterns:

| Pattern | Description |
|---------|-------------|
| `0 * * * *` | Every hour at minute 0 |
| `*/15 * * * *` | Every 15 minutes |
| `0 */6 * * *` | Every 6 hours |
| `0 9 * * *` | Daily at 9:00 AM |
| `0 9 * * 1-5` | Weekdays at 9:00 AM |
| `0 0 * * 0` | Weekly on Sunday at midnight |
| `0 0 1 * *` | Monthly on 1st day at midnight |
| `0 0 1 1 *` | Yearly on Jan 1st at midnight |
| `30 8,17 * * 1-5` | Weekdays at 8:30 AM and 5:30 PM |

---

## Use Cases

### 1. Daily Campaign Reports:
```javascript
scheduleCronJob({
  queueName: 'reportQueue',
  actionName: 'gcsCampaignReport',
  repeat: {
    cron: '0 11 * * *',  // 11 AM daily
    tz: 'Asia/Calcutta'
  }
});
```

### 2. Hourly Health Checks:
```javascript
scheduleCronJob({
  queueName: 'utilityQueue',
  actionName: 'healthCheck',
  repeat: {
    cron: '0 * * * *',  // Every hour
    tz: 'Asia/Calcutta'
  }
});
```

### 3. Weekly Analytics Summary:
```javascript
scheduleCronJob({
  queueName: 'reportQueue',
  actionName: 'weeklyAnalytics',
  repeat: {
    cron: '0 9 * * 1',  // Monday 9 AM
    tz: 'Asia/Calcutta'
  }
});
```

### 4. Data Cleanup (Every 6 Hours):
```javascript
scheduleCronJob({
  queueName: 'utilityQueue',
  actionName: 'dataCleanup',
  repeat: {
    cron: '0 */6 * * *',
    tz: 'Asia/Calcutta'
  }
});
```

### 5. Business Hours Only (9 AM - 6 PM, Weekdays):
```javascript
// Morning report
scheduleCronJob({
  queueName: 'reportQueue',
  actionName: 'morningReport',
  repeat: {
    cron: '0 9 * * 1-5',  // Weekdays 9 AM
    tz: 'Asia/Calcutta'
  }
});

// End of day report
scheduleCronJob({
  queueName: 'reportQueue',
  actionName: 'eodReport',
  repeat: {
    cron: '0 18 * * 1-5',  // Weekdays 6 PM
    tz: 'Asia/Calcutta'
  }
});
```

---

## Important Notes

1. **Timezone**: Always specify timezone to avoid confusion. Default is `Asia/Calcutta` (IST)
2. **Job ID**: Each cron job has unique ID: `{queueName}_{actionName}_{cron}`
3. **Duplicate Prevention**: Scheduling same job with same ID will update existing schedule
4. **Queue Names**: Use appropriate queue based on task priority and type
5. **Available Actions**:
   - `gcsCampaignReport` - Generate campaign reports
   - `dataCleanup` - Clean up old data
   - `healthCheck` - System health monitoring
   - Custom actions (configure in backend)

---

## Related Endpoints

- [Get Campaign Analytics](/api-reference/analytics/get-campaign-analytics) - Campaign data for reports
- [Download Campaign Stats](/api-reference/campaigns/download-campaign-stats) - Manual report download
